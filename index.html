<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¦³å…‰åœ°é¸æŠ</title>
    <style>
        /* ãƒšãƒ¼ã‚¸å…¨ä½“ã®è¨­å®š */
        body {
            margin: 0;
            width: 810px;
            height: 945px;
            background: #7accbf;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: Arial, sans-serif;
            position: relative;
        }
        
        /* ã‚¿ã‚¤ãƒˆãƒ« */
        .title {
            margin-top: 50px;
            font-size: 28px;
            color: #fcf2e5;
            text-align: center;
            font-weight: bold;
            line-height: 1.3;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        /* ç”»åƒãƒšã‚¢è¡¨ç¤ºç”¨ã‚³ãƒ³ãƒ†ãƒŠ */
        .image-container {
            display: flex;
            justify-content: center;
            gap: 25px;
            width: 100%;
            margin-top: 60px
        }
        
        /* æ–°ã—ã„ç”»åƒç”¨ã‚³ãƒ³ãƒ†ãƒŠï¼šæœ€åˆã¯å®Œå…¨ã«éè¡¨ç¤º */
        .new-image-container {
            display: none;
            width: 100%;
            justify-content: center;
            align-items: center;
            margin-top: 20px
        }
        
        /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ */
        .menu-button {
            position: absolute;
            bottom: 240px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 45px;
            background-color: white;
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
            font-size: 16px;
            font-weight: bold;
            color: #333;
            transition: transform 0.2s;
            border: none;
        }
        
        .menu-button:hover {
            transform: translateX(-50%) scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }
        
        /* ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .image-container img {
            width: 280px;
            height: 210px;
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
            object-fit: cover;
        }
        
        .image-container img:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }
        
        .new-image-container img {
            width: 420px;
            height: 315px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            object-fit: cover;
        }
        
        /* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .placeholder {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }
        
        .new-placeholder {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
        }
    </style>
</head>
<body>
    <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
    <div class="title">
        ã‚ãªãŸãªã‚‰<br>
        ã©ã£ã¡ã®è¦³å…‰åœ°ã«è¡ŒããŸã„ï¼Ÿ
    </div>
    
    <!-- å…ƒã®ãƒšã‚¢ç”»åƒ -->
    <div class="image-container">
        <img id="image1" src="" alt="è¦³å…‰åœ°1" onclick="changeImage('left')" class="placeholder">
        <img id="image2" src="" alt="è¦³å…‰åœ°2" onclick="changeImage('right')" class="placeholder">
    </div>
    
    <!-- ã‚¯ãƒªãƒƒã‚¯å¾Œã«è¡¨ç¤ºã™ã‚‹æ–°ã—ã„ç”»åƒ -->
    <div class="new-image-container">
        <img id="newImage" src="" alt="é¸æŠã•ã‚ŒãŸè¦³å…‰åœ°" class="new-placeholder">
    </div>
    
    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ -->
    <button class="menu-button" onclick="goToMenu()">
        ãƒ¡ãƒ‹ãƒ¥ãƒ¼
    </button>
    
    <script>
        // ç”»åƒã®ãƒšã‚¢ã‚’é…åˆ—ã«æ ¼ç´ï¼ˆå…ƒã®2ã¤ã®ç”»åƒã®ã¿ï¼‰
        const imagePairs = [
            ['images/term_photo1.jpg', 'images/term_photo2.jpg'],
            ['images/term_photo3.jpg', 'images/term_photo4.jpg'],
            ['images/term_photo5.jpg', 'images/term_photo6.jpg']
        ];
        
        // å„ãƒšã‚¢ã«å¯¾å¿œã™ã‚‹æ–°ã—ã„ç”»åƒï¼ˆçµæœè¡¨ç¤ºç”¨ï¼‰
        const newImages = {
            0: 'images/new12.jpg',
            1: 'images/new34.jpg',
            2: 'images/new56.jpg'
        };
        
        let currentPairIndex = 0;
        let clickedSide = ''; // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸç”»åƒã®å´ï¼ˆ'left' or 'right'ï¼‰
        
        // çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ã®åˆæœŸåŒ–
        let imageStats = {
            pair0: { left: 0, right: 0, leftImage: 'term_photo1.jpg', rightImage: 'term_photo2.jpg' },
            pair1: { left: 0, right: 0, leftImage: 'term_photo3.jpg', rightImage: 'term_photo4.jpg' },
            pair2: { left: 0, right: 0, leftImage: 'term_photo5.jpg', rightImage: 'term_photo6.jpg' }
        };
        
        // çµ±è¨ˆã‚’localStorageã‹ã‚‰èª­ã¿è¾¼ã‚€
        function loadStats() {
            const saved = localStorage.getItem('touristVotingStats');
            if (saved) {
                try {
                    imageStats = JSON.parse(saved);
                    console.log('âœ… ä¿å­˜ã•ã‚ŒãŸçµ±è¨ˆã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
                } catch (e) {
                    console.log('âš ï¸ çµ±è¨ˆã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ–°è¦ä½œæˆã—ã¾ã™ã€‚');
                }
            }
        }
        
        // çµ±è¨ˆã‚’ä¿å­˜
        function saveStats() {
            localStorage.setItem('touristVotingStats', JSON.stringify(imageStats));
            console.log('ğŸ’¾ çµ±è¨ˆã‚’ä¿å­˜ã—ã¾ã—ãŸ');
        }
        
        // ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆ
        function getRandomIndex(max) {
            return Math.floor(Math.random() * max);
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ©ãƒ³ãƒ€ãƒ ãƒšã‚¢ã‚’è¡¨ç¤º
        function displayRandomImages() {
            currentPairIndex = getRandomIndex(imagePairs.length);
            const [src1, src2] = imagePairs[currentPairIndex];
            
            const img1 = document.getElementById('image1');
            const img2 = document.getElementById('image2');
            
            // ç”»åƒèª­ã¿è¾¼ã¿å‡¦ç†
            img1.onload = function() {
                this.classList.remove('placeholder');
                this.style.background = 'none';
            };
            img1.onerror = function() {
                this.classList.add('placeholder');
                this.innerHTML = 'è¦³å…‰åœ°ç”»åƒ1';
                this.removeAttribute('src');
            };
            
            img2.onload = function() {
                this.classList.remove('placeholder');
                this.style.background = 'none';
            };
            img2.onerror = function() {
                this.classList.add('placeholder');
                this.innerHTML = 'è¦³å…‰åœ°ç”»åƒ2';
                this.removeAttribute('src');
            };
            
            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
            img1.innerHTML = 'è¦³å…‰åœ°ç”»åƒ1';
            img2.innerHTML = 'è¦³å…‰åœ°ç”»åƒ2';
            
            img1.src = src1;
            img2.src = src2;
        }
        
        // ã‚¯ãƒªãƒƒã‚¯æ™‚ï¼šã©ã¡ã‚‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã‹è¨˜éŒ² â†’ æ–°ç”»åƒã‚’è¡¨ç¤º
        function changeImage(side) {
            clickedSide = side;
            
            // çµ±è¨ˆã‚’æ›´æ–°
            const pairKey = `pair${currentPairIndex}`;
            if (side === 'left') {
                imageStats[pairKey].left++;
            } else {
                imageStats[pairKey].right++;
            }
            saveStats();
            
            console.log('âœ… æŠ•ç¥¨ã‚’è¨˜éŒ²ã—ã¾ã—ãŸ');
            console.log('ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸç”»åƒ:', clickedSide);
            console.log('é¸æŠã•ã‚ŒãŸãƒšã‚¢:', currentPairIndex);
            console.log('ç¾åœ¨ã®çµ±è¨ˆ:', imageStats[pairKey]);
            
            // å…ƒã®ç”»åƒãƒšã‚¢ã‚’éè¡¨ç¤ºã«ã—ã€æ–°ã—ã„ç”»åƒã‚’è¡¨ç¤º
            document.querySelector('.image-container').style.display = 'none';
            const newContainer = document.querySelector('.new-image-container');
            newContainer.style.display = 'flex';
            
            const newImg = document.getElementById('newImage');
            newImg.onload = function() {
                this.classList.remove('new-placeholder');
                this.style.background = 'none';
                this.innerHTML = '';
            };
            newImg.onerror = function() {
                this.classList.add('new-placeholder');
                this.innerHTML = 'é¸æŠã•ã‚ŒãŸ<br>è¦³å…‰åœ°ç”»åƒ';
                this.removeAttribute('src');
            };
            
            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
            newImg.innerHTML = 'é¸æŠã•ã‚ŒãŸ<br>è¦³å…‰åœ°ç”»åƒ';
            newImg.src = newImages[currentPairIndex];
        }
        
        // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function goToMenu() {
            document.querySelector('.image-container').style.display = 'flex';
            document.querySelector('.new-image-container').style.display = 'none';
            displayRandomImages();
        }
        
        // çµ±è¨ˆã‚’è¡¨ç¤º
        function showStats() {
            console.clear();
            console.log('='.repeat(70));
            console.log('ğŸ“Š è¦³å…‰åœ°ç”»åƒé¸æŠçµ±è¨ˆ');
            console.log('='.repeat(70));
            
            for (let i = 0; i < 3; i++) {
                const pairKey = `pair${i}`;
                const stats = imageStats[pairKey];
                const total = stats.left + stats.right;
                const leftPercent = total > 0 ? Math.round(stats.left / total * 100) : 0;
                const rightPercent = total > 0 ? Math.round(stats.right / total * 100) : 0;
                
                console.log(`\nã€ãƒšã‚¢${i + 1}ã€‘`);
                console.log('-'.repeat(60));
                console.log(`å·¦ã®ç”»åƒ: ${stats.leftImage}`);
                console.log(`  â†’ ${stats.left}äººãŒé¸æŠ (${leftPercent}%)`);
                console.log(`å³ã®ç”»åƒ: ${stats.rightImage}`);
                console.log(`  â†’ ${stats.right}äººãŒé¸æŠ (${rightPercent}%)`);
                console.log(`åˆè¨ˆ: ${total}äºº`);
            }
            
            console.log('\n' + '='.repeat(70));
            console.log('ğŸ’¡ çµ±è¨ˆã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã«ã¯: resetImageStats()');
            console.log('='.repeat(70));
            
            alert('çµ±è¨ˆã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã—ã¾ã—ãŸã€‚\nF12ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        }
        
        // çµ±è¨ˆã‚’ãƒªã‚»ãƒƒãƒˆ
        function resetImageStats() {
            if (confirm('ã™ã¹ã¦ã®çµ±è¨ˆã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                imageStats = {
                    pair0: { left: 0, right: 0, leftImage: 'term_photo1.jpg', rightImage: 'term_photo2.jpg' },
                    pair1: { left: 0, right: 0, leftImage: 'term_photo3.jpg', rightImage: 'term_photo4.jpg' },
                    pair2: { left: 0, right: 0, leftImage: 'term_photo5.jpg', rightImage: 'term_photo6.jpg' }
                };
                saveStats();
                console.log('âœ… çµ±è¨ˆã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
                showStats();
            }
        }
        
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«é–¢æ•°ã‚’å…¬é–‹
        window.resetImageStats = resetImageStats;
        window.showStats = showStats;
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
        window.onload = function() {
            loadStats();
            displayRandomImages();
            console.log('ğŸ“ è¦³å…‰åœ°é¸æŠã‚µã‚¤ãƒˆãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
            console.log('ğŸ’¡ çµ±è¨ˆã‚’è¦‹ã‚‹ã«ã¯ã€Œçµ±è¨ˆè¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„');
            console.log('ğŸ’¡ ã¾ãŸã¯ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ showStats() ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„');
        };
    </script>
</body>
</html>


